import{r as k,b as p,d as m,j as s,L as x}from"./index-BOTlMoAj.js";import{m as D,b as q}from"./mappers-CIFgCg7B.js";import{S as l}from"./skeleton-B4YvRN7w.js";import{B as L}from"./badge-Dnd58h3w.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E=(...d)=>d.filter((c,n,i)=>!!c&&c.trim()!==""&&i.indexOf(c)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=k.forwardRef(({color:d="currentColor",size:c=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:g="",children:u,iconNode:C,...N},b)=>k.createElement("svg",{ref:b,...F,width:c,height:c,stroke:d,strokeWidth:i?Number(n)*24/Number(c):n,className:E("lucide",g),...N},[...C.map(([e,t])=>k.createElement(e,t)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=(d,c)=>{const n=k.forwardRef(({className:i,...g},u)=>k.createElement(M,{ref:u,iconNode:c,className:E(`lucide-${z(d)}`,i),...g}));return n.displayName=`${d}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=A("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=A("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=A("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=A("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function R(){const{data:n}=p({queryKey:["home-categories"],queryFn:async()=>{const{data:e}=await m.get("/categories/",{params:{page_size:6}});return Array.isArray(e==null?void 0:e.results)?e.results.slice(0,6).map(D):[]}}),{data:i}=p({queryKey:["home-featured-causes"],queryFn:async()=>{const{data:e}=await m.get("/causes/",{params:{status:"live",ordering:"-created_at",page_size:6}});return Array.isArray(e==null?void 0:e.results)?e.results.slice(0,6).map(q):[]}}),{data:g}=p({queryKey:["home-causes-agg"],queryFn:async()=>{const{data:e}=await m.get("/causes/",{params:{status:"live",ordering:"-created_at",page_size:50}});return Array.isArray(e==null?void 0:e.results)?e.results.map(q):[]}}),{data:u}=p({queryKey:["home-live-causes-count"],queryFn:async()=>{const{data:e}=await m.get("/causes/",{params:{status:"live",page_size:1}});return Number((e==null?void 0:e.count)??0)}}),{data:C}=p({queryKey:["home-categories-count"],queryFn:async()=>{const{data:e}=await m.get("/categories/",{params:{page_size:1}});return Number((e==null?void 0:e.count)??0)}}),{data:N}=p({queryKey:["home-donations-count"],queryFn:async()=>{try{const{data:e}=await m.get("/donations/",{params:{page_size:1}});return Number((e==null?void 0:e.count)??0)}catch{return null}}}),{data:b}=p({queryKey:["home-platform-totals"],queryFn:async()=>{try{const{data:e}=await m.get("/admin/platform-metrics/");if(typeof(e==null?void 0:e.total_amount)=="number"&&typeof(e==null?void 0:e.total_donations)=="number")return{total_amount:e.total_amount,total_donations:e.total_donations};const{data:t}=await m.get("/donations/admin/donations/statistics/");return{total_amount:Number((t==null?void 0:t.total_amount)??0),total_donations:Number((t==null?void 0:t.total_donations)??0)}}catch{try{const{data:e}=await m.get("/admin/platform-metrics/");if(typeof(e==null?void 0:e.total_amount)=="number"&&typeof(e==null?void 0:e.total_donations)=="number")return{total_amount:e.total_amount,total_donations:e.total_donations}}catch{}return null}}});return s.jsxs("div",{className:"space-y-12",children:[s.jsxs("section",{className:"grid gap-6 md:grid-cols-2 items-center",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-semibold tracking-tight",children:"Empower Causes. Amplify Impact."}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Discover vetted causes across Ghana and donate with confidence using secure mobile money and card payments."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(x,{to:"/causes",className:"px-4 py-2 rounded-md bg-emerald-600 text-white hover:bg-emerald-700",children:"Explore Causes"}),s.jsx(x,{to:"/how-it-works",className:"px-4 py-2 rounded-md border border-slate-300 dark:border-slate-700",children:"How it works"})]})]}),s.jsx("div",{className:"rounded-xl bg-gradient-to-br from-emerald-500/10 to-blue-600/10 border border-slate-200 dark:border-slate-800 p-10","aria-hidden":"true"})]}),s.jsx("section",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[{icon:T,title:"Secure payments",desc:"Pay with trusted mobile money and cards."},{icon:K,title:"Vetted causes",desc:"Transparent campaigns and real impact."},{icon:O,title:"Fast & reliable",desc:"Snappy experience with real-time updates."},{icon:I,title:"Simple & clear",desc:"No clutter—just donate and track easily."}].map((e,t)=>s.jsxs("div",{className:"rounded-lg border p-4 flex items-start gap-3",children:[s.jsx(e.icon,{className:"h-5 w-5 text-emerald-600 mt-1"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.title}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:e.desc})]})]},t))}),s.jsxs("section",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[b===void 0?s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsx(l,{className:"h-6 w-32"}),s.jsx(l,{className:"h-4 w-24 mt-2"})]}):b?s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsxs("div",{className:"text-3xl font-semibold",children:["₵",b.total_amount.toLocaleString()]}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Total raised"})]}):null,u===void 0?s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsx(l,{className:"h-6 w-32"}),s.jsx(l,{className:"h-4 w-24 mt-2"})]}):s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsx("div",{className:"text-3xl font-semibold",children:u.toLocaleString()}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Live causes"})]}),C===void 0?s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsx(l,{className:"h-6 w-32"}),s.jsx(l,{className:"h-4 w-24 mt-2"})]}):s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsx("div",{className:"text-3xl font-semibold",children:C.toLocaleString()}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Categories"})]}),N===void 0?s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsx(l,{className:"h-6 w-32"}),s.jsx(l,{className:"h-4 w-24 mt-2"})]}):N!==null?s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsx("div",{className:"text-3xl font-semibold",children:N.toLocaleString()}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Your donations"})]}):null]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Top categories"}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[!n&&!g&&Array.from({length:6}).map((e,t)=>s.jsx(l,{className:"h-8 w-32"},t)),(()=>{const e=n??[];return e.some(a=>typeof a.cause_count=="number")?e.slice().sort((a,h)=>Number(h.cause_count??0)-Number(a.cause_count??0)).slice(0,8).map(a=>s.jsxs(x,{to:`/causes?category=${a.id}`,className:"px-3 py-1 rounded-full border border-slate-300 dark:border-slate-700 whitespace-nowrap",children:[a.name," ",s.jsxs("span",{className:"text-xs text-slate-500",children:["(",Number(a.cause_count??0),")"]})]},a.id)):null})(),(()=>{if((n??[]).some(r=>typeof r.cause_count=="number"))return null;const a={};(g||[]).forEach(r=>{var j,f,w,v;const o=String(((j=r.category)==null?void 0:j.id)??((f=r.category)==null?void 0:f.name)??""),S=((w=r.category)==null?void 0:w.name)??"Other",y=(v=r.category)==null?void 0:v.id;o&&(a[o]=a[o]||{name:S,count:0,id:y},a[o].count+=1)});const h=Object.values(a).sort((r,o)=>o.count-r.count).slice(0,8);return h.length===0?null:h.map((r,o)=>s.jsxs(x,{to:r.id?`/causes?category=${r.id}`:`/causes?search=${encodeURIComponent(r.name)}`,className:"px-3 py-1 rounded-full border border-slate-300 dark:border-slate-700 whitespace-nowrap",children:[r.name," ",s.jsxs("span",{className:"text-xs text-slate-500",children:["(",r.count,")"]})]},o))})()]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Browse by Category"}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[!n&&Array.from({length:6}).map((e,t)=>s.jsx(l,{className:"h-8 w-28"},t)),n==null?void 0:n.map(e=>s.jsx(x,{to:`/causes?category=${e.id}`,className:"px-3 py-1 rounded-full border border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-900 whitespace-nowrap",children:e.name},e.id))]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Featured causes"}),s.jsx(x,{to:"/causes",className:"text-sm text-emerald-700",children:"View all"})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[!i&&Array.from({length:6}).map((e,t)=>s.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[s.jsx(l,{className:"h-44 w-full"}),s.jsx(l,{className:"h-4 w-32"}),s.jsx(l,{className:"h-6 w-3/4"}),s.jsx(l,{className:"h-2 w-full"})]},t)),i==null?void 0:i.map(e=>{var w,v;const t=new Date,a=e.created_at?new Date(e.created_at):void 0,h=e.deadline?new Date(e.deadline):void 0,r=a?(t.getTime()-a.getTime())/(1e3*60*60*24)<=14:!1,o=h?Math.ceil((h.getTime()-t.getTime())/(1e3*60*60*24)):void 0,S=typeof o=="number"&&o>=0&&o<=7,y=Number(e.target_amount??0)||0,j=Number(e.current_amount??0)||0,f=typeof e.progress_percentage=="number"?Math.max(0,Math.min(100,e.progress_percentage)):y>0?Math.max(0,Math.min(100,j/y*100)):0;return s.jsxs("div",{className:"rounded-lg border overflow-hidden bg-white dark:bg-slate-900",children:[s.jsx(x,{to:`/causes/${e.id}`,"aria-label":`View cause: ${e.title??"Cause"}`,children:e.featured_image&&s.jsx("img",{src:e.featured_image,alt:e.title?`Image for ${e.title}`:"Cause image",className:"w-full h-44 object-cover",loading:"lazy"})}),s.jsxs("div",{className:"p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"text-xs",children:s.jsx("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5",style:(()=>{var $;const _=($=e.category)==null?void 0:$.color;return typeof _=="string"&&/^#([0-9a-f]{3}){1,2}$/i.test(_)?{backgroundColor:_+"20",borderColor:_,color:_}:{}})(),"aria-label":`Category: ${((w=e.category)==null?void 0:w.name)??""}`,children:(v=e.category)==null?void 0:v.name})}),s.jsxs("div",{className:"flex items-center gap-2",children:[r&&s.jsx("span",{title:"Created within the last 14 days",children:s.jsx(L,{variant:"success",children:"new"})}),S&&s.jsx("span",{title:"Deadline within 7 days",children:s.jsxs(L,{variant:"warning",children:["ending soon",typeof o=="number"?` (${o}d)`:""]})})]})]}),s.jsx(x,{to:`/causes/${e.id}`,className:"block font-medium line-clamp-2","aria-label":`Go to cause ${e.title??""}`,children:e.title}),y>0&&s.jsxs("div",{className:"space-y-1","aria-label":`Progress ${Math.round(f)}%`,children:[s.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${f}%`}})}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[s.jsxs("span",{children:["₵",j.toLocaleString()," raised"]}),s.jsxs("span",{children:["₵",y.toLocaleString()," target"]})]})]})]})]},e.id)})]})]})]})}export{R as HomePage};
