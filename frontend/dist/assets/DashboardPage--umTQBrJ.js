import{b as l,d,j as e,L as j}from"./index-BOTlMoAj.js";import{S as o}from"./skeleton-B4YvRN7w.js";import{T as p,a as y,b as g,c as i,d as v,e as r}from"./table-BXEUr2mf.js";import{B as x}from"./badge-Dnd58h3w.js";function T(){var m;const{data:a,isLoading:n}=l({queryKey:["dashboard-donations"],queryFn:async()=>{const{data:s}=await d.get("/donations/",{params:{page_size:5}});return s}}),{data:t,isLoading:N}=l({queryKey:["dashboard-cart"],queryFn:async()=>{const{data:s}=await d.get("/cart/");return s}}),{data:c}=l({queryKey:["dashboard-donation-stats"],queryFn:async()=>{const{data:s}=await d.get("/donations/statistics/");return s}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Welcome back"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Here’s a quick overview of your activity."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Recent donations"}),e.jsx("div",{className:"mt-2 text-3xl font-semibold",children:n?"…":(a==null?void 0:a.count)??0})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Items in cart"}),e.jsx("div",{className:"mt-2 text-3xl font-semibold",children:N?"…":Array.isArray(t==null?void 0:t.items)?t.items.length:((m=t==null?void 0:t.results)==null?void 0:m.length)??0})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Unread notifications"}),e.jsx(b,{})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Total donated"}),e.jsxs("div",{className:"mt-2 text-3xl font-semibold",children:["₵",Number((c==null?void 0:c.total_amount)??0).toLocaleString()]})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:"Recent donations"}),e.jsx(j,{to:"/app/donations",className:"text-sm text-emerald-700",children:"View all"})]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"h-4 w-3/4"}),e.jsx(o,{className:"h-4 w-2/3"}),e.jsx(o,{className:"h-4 w-1/2"})]}),!n&&(!a||a.count===0)&&e.jsx("div",{className:"text-sm text-slate-500",children:"No recent donations yet."}),!n&&Array.isArray(a==null?void 0:a.results)&&a.results.length>0&&e.jsxs(p,{children:[e.jsx(y,{children:e.jsxs(g,{children:[e.jsx(i,{children:"Date"}),e.jsx(i,{children:"Cause"}),e.jsx(i,{className:"text-right",children:"Amount"}),e.jsx(i,{className:"text-right",children:"Status"})]})}),e.jsx(v,{children:a.results.slice(0,5).map(s=>{var u,h;return e.jsxs(g,{children:[e.jsx(r,{children:s.donated_at?new Date(s.donated_at).toLocaleString():"-"}),e.jsx(r,{children:(u=s.cause)!=null&&u.id?e.jsx(j,{to:`/causes/${s.cause.id}`,className:"hover:underline",children:((h=s.cause)==null?void 0:h.title)||s.cause_title||"Donation"}):s.cause_title||"Donation"}),e.jsxs(r,{className:"text-right",children:["₵",Number(s.amount).toLocaleString()]}),e.jsxs(r,{className:"text-right",children:[s.status==="completed"&&e.jsx(x,{variant:"success",children:"completed"}),s.status==="pending"&&e.jsx(x,{variant:"warning",children:"pending"}),s.status!=="completed"&&s.status!=="pending"&&e.jsx(x,{variant:"destructive",children:String(s.status)})]})]},s.id)})})]})]})]})}function b(){const{data:a}=l({queryKey:["notifications-unread-count"],queryFn:async()=>{const{data:n}=await d.get("/notifications/",{params:{unread_only:!0,page_size:1}});return n.count}});return e.jsx("div",{className:"mt-2 text-3xl font-semibold",children:a??0})}export{T as default};
