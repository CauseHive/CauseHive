import{r as x,u as g,j as e,d as v}from"./index-BOTlMoAj.js";import{u as w,t as y,o as S,s as N}from"./zod-CKyyCNA0.js";import{B as R}from"./button-BQgy-EYF.js";import{I as E}from"./input-DCYKmd-d.js";import{L as k}from"./label-DKVCDqKQ.js";const F=S({email:N().email()});function L(){const{register:p,handleSubmit:h,formState:{errors:a,isSubmitting:f}}=w({resolver:y(F)}),[r,i]=x.useState(null),[o,l]=x.useState(null),{notify:m}=g(),j=async b=>{var n,c,d,u;i(null),l(null);try{const{data:t}=await v.post("/user/password-reset/",b);i((t==null?void 0:t.message)??"If the email exists, a reset link has been sent."),m({title:"Reset link sent",variant:"success"})}catch(t){const s=t;l(((c=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:c.error)||"Failed to request password reset"),m({title:"Password reset failed",description:(u=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:u.error,variant:"error"})}};return e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Reset your password"}),r&&e.jsx("div",{className:"mb-3 text-emerald-700 text-sm",children:r}),o&&e.jsx("div",{className:"mb-3 text-red-600 text-sm",children:o}),e.jsxs("form",{onSubmit:h(j),className:"space-y-4",noValidate:!0,children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"email",children:"Email"}),e.jsx(E,{id:"email",type:"email",...p("email"),"aria-invalid":!!a.email}),a.email&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:a.email.message})]}),e.jsx(R,{disabled:f,className:"w-full",children:"Send reset link"})]})]})}export{L as PasswordResetRequestPage};
